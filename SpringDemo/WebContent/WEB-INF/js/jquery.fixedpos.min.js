(function($){$.fn.fixedpos=function(settings){var settings=$.extend({width:100,height:'auto',margin:0,offsetX:0,offsetY:0,positionX:'left',positionY:'top',styleName:'fixedBox',opacity:1,closeable:false,closetext:'\u5173\u95ED',closetimer:0,effect:'normal',duration:400},settings||{});var isIE6=!-[1,]&&!window.XMLHttpRequest;$(this).each(function(){var $posBox=$(this);$posBox.addClass(settings.styleName);$posBox.css({'width':settings.width,'height':settings.height,'opacity':settings.opacity});var closeBox=function(){switch(settings.effect){case'fade':$posBox.fadeOut(settings.duration);break;case'normal':default:$posBox.hide()}};if(settings.closeable){$posBox.append('<a class="close" href="javascript:void(0)" title="'+settings.closetext+'">'+settings.closetext+'</a>');$posBox.find('a.close').click(function(){closeBox();return false})}if(settings.closeable&&settings.closetimer){var timer=setTimeout(function(){closeBox()},settings.closetimer)}var setPosition=function(){var winWidth=$(window).width();var winHeight=$(window).height();var marginWidth=(settings.margin==0)?0:(winWidth-settings.margin)/2;var boxHeight=(settings.height=='auto')?$posBox.height():settings.height;switch(settings.positionX){case'left':$posBox.css({'left':marginWidth-settings.offsetX,'right':'auto'});break;case'right':$posBox.css({'right':marginWidth-settings.offsetX,'left':'auto'});break;case'center':$posBox.css({'left':(parseInt(winWidth)-parseInt(settings.width))/2+settings.offsetX,'right':'auto'});break;default:$posBox.css({'left':marginWidth-settings.offsetX,'right':'auto'})}switch(settings.positionY){case'top':$posBox.css({'top':settings.offsetY,'bottom':'auto'});break;case'bottom':$posBox.css({'bottom':settings.offsetY,'top':'auto'});break;case'middle':$posBox.css({'top':(parseInt(winHeight)-parseInt(boxHeight))/2+settings.offsetY,'bottom':'auto'});break;default:$posBox.css({'top':settings.offsetY,'bottom':'auto'})}};if(isIE6){$posBox.css('position','absolute');var maxHeight=$(document).outerHeight();var lastScrollY=0;$(window).scroll(function(){var boxTop=parseInt($posBox.css('top'));var boxBtm=boxTop+parseInt($posBox.outerHeight());var diffY=$(document).scrollTop();if(boxBtm>=maxHeight)return;var percent=diffY-lastScrollY;percent=percent>0?Math.ceil(percent):Math.floor(percent);$posBox.css('top',boxTop+percent+'px');lastScrollY+=percent})}else{$posBox.css('position','fixed')}setPosition();$(window).resize(function(){setPosition()})})}})(jQuery);